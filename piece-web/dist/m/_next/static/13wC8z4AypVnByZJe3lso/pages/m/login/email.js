(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"+f1s":function(e,t,n){"use strict";n("hfKm")(t,"__esModule",{value:!0}),t.getQueryString=void 0;t.getQueryString=e=>{var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!==n?decodeURI(n[2]):null}},Auss:function(e,t,n){"use strict";var o,r=n("ODXe"),a=n("q1tI"),i=n.n(a),c=i.a.createElement;t.a=function(e){var t=e.submit,n=e.onChange,a=i.a.useState(!1),s=Object(r.a)(a,2),l=s[0],u=s[1],d=i.a.useState(1),f=Object(r.a)(d,2),p=f[0],m=f[1],b=function(e){var t=e.data||{};t.load&&u(!0),t.loginSuccess&&(document.cookie="OAUTH2SESSION="+t.data.OAUTH2SESSION+"; expires=; path=/;",n(!0)),t.loginFailed&&(n(!1),m(p+1))};return i.a.useEffect((function(){var e;window.addEventListener("message",b,!1),o=document.createElement("iframe"),-1!==(null===(e=location)||void 0===e?void 0:e.origin.indexOf("keypool.dev"))?o.src="https://www.keypool.dev/oauth2/login/":o.src="https://www.keypool.com/oauth2/login/",o.id="fay-iframe",o.name="fay-iframe",o.style.display="none",document.body.appendChild(o)}),[]),i.a.useEffect((function(){t&&l&&o&&o.contentWindow.postMessage({login:!0,cookie:document.cookie},"*")}),[t,l]),c("div",null)}},Ofpx:function(e,t,n){"use strict";n.r(t);var o=n("q1tI"),r=n.n(o),a=n("o0o1"),i=n.n(a),c=n("HaE+"),s=n("rePB"),l=n("ODXe"),u=n("R/WZ"),d=n("LXXt"),f=n("Px9/"),p=n("nu8I"),m=n("Z3vd"),b=n("iae6"),g=n("iuhU"),v=n("nOHt"),O=n.n(v),h=n("ab0A"),w=n("UA+C"),y=n("izKJ"),j=n("XwMy"),S=n("Auss"),x=n("+f1s"),E=n("ofer"),P=n("d829"),T=n("s0f7"),k=r.a.createElement;function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=Object(u.a)((function(e){return{root:{width:"100%",minHeight:"calc(100vh - 40px)",display:"flex",flexDirection:"column"},content:{flex:1,padding:e.spacing(0,2)},title:{fontWeight:500,fontSize:"1.5rem",color:d.a[900],padding:e.spacing(5,0,4,.5)},pwTop:{margin:e.spacing(3.5,0,0,0)},loginTop:{margin:e.spacing(6,0,0,0)},login:{height:e.spacing(6),borderRadius:e.spacing(3.5),fontWeight:500,fontSize:"0.875rem"},bottom:{height:48,color:d.a[600],fontSize:"0.875rem",borderTop:"1px solid #E0E0E0",display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:"row",width:"100%",position:"fixed",bottom:0,opacity:1,transition:".5s all ease-in"},bottomBlur:{position:"relative",opacity:0,transition:".1s all ease-in"},bottomContent:{width:150,display:"flex",justifyContent:"center"},find:{color:"#263BE0"}}})),C=function(){var e=N({}),t=r.a.useState(!1),n=Object(l.a)(t,2),o=n[0],a=n[1],s=r.a.useState(!1),u=Object(l.a)(s,2),d=u[0],v=u[1],I=r.a.useState(!1),C=Object(l.a)(I,2),A=C[0],_=C[1],B=r.a.useState({requestId:0,sessionId:"",sig:"",token:"",scene:""}),U=Object(l.a)(B,2),W=U[0],z=U[1],X=r.a.useState({email:"",password:"",aliDialog:!1,focus:!1,errPhoneText:"",errPWText:"",err:""}),H=Object(l.a)(X,2),J=H[0],q=H[1],K=function(){return q(D(D({},J),{},{focus:!0}))},M=function(){return q(D(D({},J),{},{focus:!1}))},R=function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!1),t.sig){e.next=5;break}return _(!1),q(D(D({},J),{},{err:"\u8bf7\u8fdb\u884c\u4eba\u673a\u9a8c\u8bc1"})),e.abrupt("return");case 5:return n={requestId:(new Date).getTime(),sessionId:t.sessionId,sig:t.sig,token:t.token,scene:t.scene},z(n),q(D(D({},J),{},{aliDialog:!1})),e.next=10,Object(h.a)(n,J,q);case 10:e.sent?a(!0):_(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return k("div",{className:e.root},k("div",{className:e.content},k("div",{className:e.title},"\u767b\u5f55KeyPool"),k("div",null,k(f.a,{label:"\u8bf7\u8f93\u5165\u90ae\u7bb1",fullWidth:!0,onChange:function(e,t){q(D(D({},J),{},t?{email:e,err:"",errPhoneText:""}:{email:"",err:""}))},onFocus:K,onBlur:M,notEmpty:!0,errorText:J.errPhoneText,hot:!1})),k("div",{className:e.pwTop},k(p.a,{onChange:function(e){return q(D(D({},J),{},{password:e,err:"",errPWText:""}))},onFocus:K,onBlur:M,errorText:J.errPWText,hot:!1})),J.err&&J.err.length>0?k("div",{className:e.pwTop},k(w.a,{des:J.err,callback:function(){return q(D(D({},J),{},{err:""}))}})):null,k("div",{className:e.loginTop},k(m.a,{disabled:A,className:Object(g.a)(e.login),fullWidth:!0,onClick:function(){console.log(W),Object(P.removeUser)(),Object(T.remove)("OAUTH2SESSION",{path:"/"}),Object(T.remove)("JSESSIONID",{path:"/"}),q(D(D({},J),{},{err:""})),_(!1),J.email?J.password?(_(!0),q(D(D({},J),{},{aliDialog:!0}))):q(D(D({},J),{},{err:"\u8bf7\u8f93\u5165\u5bc6\u7801"})):q(D(D({},J),{},{errPhoneText:"E-mail\u8f93\u5165\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"}))},color:"primary",variant:"contained"},k(E.a,{style:{position:"absolute"}},"\u767b\u5f55"),A&&k("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"absolute"}},k(b.a,{size:28}))))),k("div",{className:Object(g.a)(e.bottom,J.focus&&e.bottomBlur)},k("div",{className:e.bottomContent,onClick:function(){return O.a.push(j.c+"/forget")}},k("div",null,"\u5fd8\u8bb0\u5bc6\u7801\uff1f"),k("div",{className:e.find},"\u627e\u56de\u5bc6\u7801")),k("div",{className:e.bottomContent,onClick:function(){return O.a.push(j.c+"/register/email")}},k("div",null,"\u6ca1\u6709\u8d26\u53f7\uff1f"),k("div",{className:e.find},"\u7acb\u5373\u6ce8\u518c"))),k(y.a,{open:J.aliDialog,render:d,onClose:function(){v(!0),_(!1),q(D(D({},J),{},{aliDialog:!1}))},callback:R,label:"\u4eba\u673a\u9a8c\u8bc1\u6ed1\u5757",successText:"\u9a8c\u8bc1\u901a\u8fc7"}),k(S.a,{submit:o,onChange:function(e){if(a(!1),_(!1),e){var t=Object(x.getQueryString)("redirectUrl");t&&(t=decodeURIComponent(t).split(window.location.origin)[1]),O.a.replace(t||j.c+"/")}else q(D(D({},J),{},{err:"\u767b\u5f55\u5931\u8d25"}))}}))},A=r.a.createElement,_=function(){return A("div",null,A(C,null))},B=n("jmmT"),U=r.a.createElement;t.default=function(){return U(B.a,{header:!0,back:!0},U(_,null))}},"Px9/":function(e,t,n){"use strict";var o=n("wx14"),r=n("ODXe"),a=n("Ff2n"),i=n("q1tI"),c=n.n(i),s=n("2frL"),l=c.a.createElement,u=function(e,t){return t||""!==e.trim()?""===e.trim()?"\u8bf7\u8f93\u5165E-mail":t&&!/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)?"E-mail\u8f93\u5165\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165":e.length>100?"\u8f93\u5165\u7684\u4fe1\u606f\u8fc7\u957f\uff0c\u8bf7\u68c0\u67e5\u540e\u91cd\u65b0\u8f93\u5165":"":""};t.a=function(e){var t=e.notEmpty,n=void 0!==t&&t,i=e.value,d=e.disabled,f=void 0!==d&&d,p=e.onChange,m=e.onBlur,b=e.fullWidth,g=e.label,v=e.placeholder,O=e.errorText,h=void 0===O?"":O,w=e.hot,y=void 0===w||w,j=Object(a.a)(e,["notEmpty","value","disabled","onChange","onBlur","fullWidth","label","placeholder","errorText","hot"]),S=c.a.useState(""),x=Object(r.a)(S,2),E=x[0],P=x[1];c.a.useEffect((function(){P(h)}),[h]);return l(s.a,Object(o.a)({label:g,placeholder:v,fullWidth:b,value:i,disabled:f,onChange:function(e){P("");var t=e.target.value,o=u(t,n);y&&P(o),p&&p(t,0===o.length)},error:E.length>0,helperText:E,onBlur:function(e){var t=e.target.value,o=u(t,n);P(o),m&&m(e)},variant:"filled"},j))}},aGkm:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/m/login/email",function(){return n("Ofpx")}])},ab0A:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n("rePB"),r=n("0NzB"),a=n("XwMy"),i=n("d829"),c=n("s0f7");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e,t,n){return new Promise((function(o){Object(i.removeUser)(),Object(c.remove)("OAUTH2SESSION",{path:"/"}),Object(c.remove)("JSESSIONID",{path:"/"});var s={email:t.email,mobileNo:t.phone,country:t.country,password:t.password,robot:{sessionId:e.sessionId,sig:e.sig,token:e.token,scene:e.scene}};Object(r.postJson)({path:a.b+(t.phone?"/login/mobile":"/login/email"),data:s}).then((function(e){0===e.status?(Object(i.saveUser)(l(l({},e.userInfo),{},{name:e.loginAccount})),o(!0)):(o(!1),n(l(l({},t),{},{aliDialog:!1,err:e.message})))}))}))}},s0f7:function(e,t,n){"use strict";var o=n("KI45");n("hfKm")(t,"__esModule",{value:!0}),t.save=t.remove=t.load=void 0;var r=o(n("BezJ"));const a=r.default.load;t.load=a;const i=r.default.remove;t.remove=i;const c=r.default.save;t.save=c}},[["aGkm",0,2,1,3,4,5,6,7,12,13]]]);