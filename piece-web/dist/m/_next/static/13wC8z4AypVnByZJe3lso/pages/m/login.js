(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"+f1s":function(e,t,n){"use strict";n("hfKm")(t,"__esModule",{value:!0}),t.getQueryString=void 0;t.getQueryString=e=>{var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!==n?decodeURI(n[2]):null}},Auss:function(e,t,n){"use strict";var o,r=n("ODXe"),a=n("q1tI"),i=n.n(a),s=i.a.createElement;t.a=function(e){var t=e.submit,n=e.onChange,a=i.a.useState(!1),c=Object(r.a)(a,2),l=c[0],u=c[1],p=i.a.useState(1),d=Object(r.a)(p,2),f=d[0],b=d[1],g=function(e){var t=e.data||{};t.load&&u(!0),t.loginSuccess&&(document.cookie="OAUTH2SESSION="+t.data.OAUTH2SESSION+"; expires=; path=/;",n(!0)),t.loginFailed&&(n(!1),b(f+1))};return i.a.useEffect((function(){var e;window.addEventListener("message",g,!1),o=document.createElement("iframe"),-1!==(null===(e=location)||void 0===e?void 0:e.origin.indexOf("keypool.dev"))?o.src="https://www.keypool.dev/oauth2/login/":o.src="https://www.keypool.com/oauth2/login/",o.id="fay-iframe",o.name="fay-iframe",o.style.display="none",document.body.appendChild(o)}),[]),i.a.useEffect((function(){t&&l&&o&&o.contentWindow.postMessage({login:!0,cookie:document.cookie},"*")}),[t,l]),s("div",null)}},HyZN:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/m/login",function(){return n("Rm6c")}])},Rm6c:function(e,t,n){"use strict";n.r(t);var o=n("q1tI"),r=n.n(o),a=n("o0o1"),i=n.n(a),s=n("HaE+"),c=n("rePB"),l=n("ODXe"),u=n("R/WZ"),p=n("LXXt"),d=n("HV/x"),f=n("nu8I"),b=n("Z3vd"),g=n("iae6"),m=n("iuhU"),O=n("nOHt"),h=n.n(O),v=n("ab0A"),y=n("UA+C"),w=n("izKJ"),j=n("XwMy"),S=n("Auss"),E=n("+f1s"),P=n("ofer"),x=n("d829"),N=n("s0f7"),T=r.a.createElement;function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=Object(u.a)((function(e){return{root:{width:"100%",minHeight:"calc(100vh - 40px)",display:"flex",flexDirection:"column"},content:{flex:1,padding:e.spacing(0,2)},title:{fontWeight:500,fontSize:"1.5rem",color:p.a[900],padding:e.spacing(5,0,4,.5)},pwTop:{margin:e.spacing(3.5,0,0,0)},loginTop:{margin:e.spacing(6,0,0,0)},login:{height:e.spacing(6),borderRadius:e.spacing(3.5),fontWeight:500,fontSize:"0.875rem"},bottom:{height:48,color:p.a[600],fontSize:"0.875rem",borderTop:"1px solid #E0E0E0",display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:"row",width:"100%",position:"fixed",bottom:0,opacity:1,transition:".5s all ease-in"},bottomBlur:{position:"relative",opacity:0,transition:".1s all ease-in"},bottomContent:{width:150,display:"flex",justifyContent:"center"},find:{color:"#263BE0"}}})),C=function(){var e=D({}),t=r.a.useState(!1),n=Object(l.a)(t,2),o=n[0],a=n[1],c=r.a.useState(!1),u=Object(l.a)(c,2),p=u[0],O=u[1],I=r.a.useState(!1),C=Object(l.a)(I,2),U=C[0],A=C[1],H=r.a.useState({requestId:0,sessionId:"",sig:"",token:"",scene:""}),_=Object(l.a)(H,2),z=_[0],B=_[1],W=r.a.useState({phone:"",password:"",country:"CN",aliDialog:!1,focus:!1,errPhoneText:"",errPWText:"",err:"",response:null}),X=Object(l.a)(W,2),J=X[0],R=X[1],K=function(e){R(k(k({},J),{},{focus:!0,response:e}))},M=function(e){R(k(k({},J),{},{focus:!1,response:e}))},Z=function(){var e=Object(s.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(!1),t.sig){e.next=5;break}return A(!1),R(k(k({},J),{},{err:"\u8bf7\u8fdb\u884c\u4eba\u673a\u9a8c\u8bc1"})),e.abrupt("return");case 5:return n={requestId:(new Date).getTime(),sessionId:t.sessionId,sig:t.sig,token:t.token,scene:t.scene},B(n),R(k(k({},J),{},{aliDialog:!1})),e.next=10,Object(v.a)(n,J,R);case 10:e.sent?a(!0):A(!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return T("div",{className:e.root},T("div",{className:e.content},T("div",{className:e.title},"\u767b\u5f55KeyPool"),T(d.a,{onSelect:function(e){R(k(k({},J),{},{country:e,err:""}))},defaultCountry:J.country,onPhone:function(e,t){t&&("CN"!==J.country||11===e.length)?"HK"===J.country&&e.length>8?R(k(k({},J),{},{phone:"",err:""})):R(k(k({},J),{},{phone:e,err:"",errPhoneText:""})):R(k(k({},J),{},{phone:"",err:""}))},defaultPhone:"",label:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",emptyErrorText:"\u8bf7\u9009\u62e9\u8054\u7cfb\u65b9\u5f0f",longErrorText:"\u8f93\u5165\u7684\u4fe1\u606f\u8fc7\u957f\uff0c\u8bf7\u68c0\u67e5\u540e\u91cd\u65b0\u8f93\u5165",enterErrorText:"\u624b\u673a\u53f7\u7801\u8f93\u5165\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",language:/^[a-zA-Z]+$/.test("\u8bf7\u8f93\u5165\u624b\u673a\u53f7")?"en":"zh",showErrorText:J.errPhoneText,onFocus:K,onBlur:M,hot:!1}),T("div",{className:e.pwTop},T(f.a,{onChange:function(e){return R(k(k({},J),{},{password:e,err:"",errPWText:""}))},onFocus:K,onBlur:M,errorText:J.errPWText,hot:!1})),J.err&&J.err.length>0?T("div",{className:e.pwTop},T(y.a,{des:J.err,callback:function(){return R(k(k({},J),{},{err:""}))}})):null,T("div",{className:e.loginTop},T(b.a,{disabled:U,className:Object(m.a)(e.login),fullWidth:!0,onClick:function(){console.log(z),Object(x.removeUser)(),Object(N.remove)("OAUTH2SESSION",{path:"/"}),Object(N.remove)("JSESSIONID",{path:"/"}),R(k(k({},J),{},{err:""})),A(!1),J.phone?J.password?(A(!0),R(k(k({},J),{},{aliDialog:!0}))):R(k(k({},J),{},{err:"\u8bf7\u8f93\u5165\u5bc6\u7801"})):R(k(k({},J),{},{err:"\u8bf7\u8f93\u5165\u8d26\u53f7"}))},color:"primary",variant:"contained"},T(P.a,{style:{position:"absolute"}},"\u767b\u5f55"),U&&T("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"absolute"}},T(g.a,{size:28}))))),T("div",{className:Object(m.a)(e.bottom,J.focus&&e.bottomBlur)},T("div",{className:e.bottomContent,onClick:function(){return h.a.push(j.c+"/forget")}},T("div",null,"\u5fd8\u8bb0\u5bc6\u7801\uff1f"),T("div",{className:e.find},"\u627e\u56de\u5bc6\u7801")),T("div",{className:e.bottomContent,onClick:function(){return h.a.push(j.c+"/register")}},T("div",null,"\u6ca1\u6709\u8d26\u53f7\uff1f"),T("div",{className:e.find},"\u7acb\u5373\u6ce8\u518c"))),T(w.a,{open:J.aliDialog,render:p,onClose:function(){O(!0),A(!1),R(k(k({},J),{},{aliDialog:!1}))},callback:Z,label:"\u4eba\u673a\u9a8c\u8bc1\u6ed1\u5757",successText:"\u9a8c\u8bc1\u901a\u8fc7"}),T(S.a,{submit:o,onChange:function(e){if(a(!1),A(!1),e){var t=Object(E.getQueryString)("redirectUrl");t&&(t=decodeURIComponent(t).split(window.location.origin)[1]),h.a.replace(t||j.c+"/")}else R(k(k({},J),{},{err:"\u767b\u5f55\u5931\u8d25"}))}}))},U=r.a.createElement,A=function(){return U("div",null,U(C,null))},H=n("jmmT"),_=r.a.createElement;t.default=function(){return _(H.a,{header:!0,back:!0},_(A,null))}},ab0A:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var o=n("rePB"),r=n("0NzB"),a=n("XwMy"),i=n("d829"),s=n("s0f7");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e,t,n){return new Promise((function(o){Object(i.removeUser)(),Object(s.remove)("OAUTH2SESSION",{path:"/"}),Object(s.remove)("JSESSIONID",{path:"/"});var c={email:t.email,mobileNo:t.phone,country:t.country,password:t.password,robot:{sessionId:e.sessionId,sig:e.sig,token:e.token,scene:e.scene}};Object(r.postJson)({path:a.b+(t.phone?"/login/mobile":"/login/email"),data:c}).then((function(e){0===e.status?(Object(i.saveUser)(l(l({},e.userInfo),{},{name:e.loginAccount})),o(!0)):(o(!1),n(l(l({},t),{},{aliDialog:!1,err:e.message})))}))}))}},s0f7:function(e,t,n){"use strict";var o=n("KI45");n("hfKm")(t,"__esModule",{value:!0}),t.save=t.remove=t.load=void 0;var r=o(n("BezJ"));const a=r.default.load;t.load=a;const i=r.default.remove;t.remove=i;const s=r.default.save;t.save=s}},[["HyZN",0,2,1,3,4,5,6,7,12,13,16]]]);