(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{"4yGX":function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),o=n.n(r),a=n("jmmT"),i=n("o0o1"),c=n.n(i),l=n("HaE+"),u=n("rePB"),s=n("ODXe"),d=n("R/WZ"),p=n("LXXt"),f=n("Px9/"),b=n("iRFQ"),h=n("Z3vd"),m=n("iuhU"),g=n("iae6"),v=n("nOHt"),O=n("YTlh"),y=n("UA+C"),j=n("ofer"),x=n("ZiQX"),w=o.a.createElement;function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(u.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=Object(d.a)((function(e){return{root:{width:"100%",minHeight:"calc(100vh - 40px)",display:"flex",flexDirection:"column"},content:{flex:1,padding:e.spacing(0,2)},title:{fontWeight:500,fontSize:"1.5rem",color:p.a[900],padding:e.spacing(5,0,4,.5)},pwTop:{margin:e.spacing(3.5,0,0,0)},grey:{color:p.a[400]},loginTop:{margin:e.spacing(6,0,0,0)},login:{height:e.spacing(6),borderRadius:e.spacing(3.5),fontWeight:500,fontSize:"0.875rem"},toast:{position:"absolute",bottom:0,left:0,width:"100%"}}})),k=function(){var e,t=E({}),n=Object(v.useRouter)(),r=n.query,a=r.requestId,i=r.bind,u=void 0===i?"false":i,d=!1;u&&(d=JSON.parse(u));var p=o.a.useState(!1),T=Object(s.a)(p,2),k=T[0],P=T[1],N=o.a.useState(""),C=Object(s.a)(N,2),S=C[0],I=C[1],D=o.a.useState({email:"",code:"",errPhoneText:"",errCodeText:"",check:!1}),B=Object(s.a)(D,2),X=B[0],R=B[1],z=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I(""),P(!1),X.email){e.next=5;break}return R(F(F({},X),{},{errPhoneText:"\u8bf7\u8f93\u5165\u90ae\u7bb1"})),e.abrupt("return");case 5:if(X.code){e.next=8;break}return R(F(F({},X),{},{errCodeText:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"})),e.abrupt("return");case 8:return e.next=10,Object(O.b)({phoneType:!1,bind:d,mobileNo:"",email:X.email,country:"",code:X.code,requestId:a,setLoading:P,setError:I});case 10:e.sent&&(R(F(F({},X),{},{check:!0})),setTimeout((function(){n.back()}),2e3));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X.email){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(O.a)({phoneType:!1,bind:d,mobileNo:"",email:X.email,country:"",setLoading:P,setError:I});case 4:e.sent&&t();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return w("div",{className:t.root},w("div",{className:t.content},X.check?w(x.a,{elevation:6,variant:"filled",severity:"success",className:t.toast},"\u90ae\u7bb1\u4fee\u6539/\u7ed1\u5b9a\u6210\u529f"):null,w("div",{className:t.title},"\u4fee\u6539/\u7ed1\u5b9a\u90ae\u7bb1"),w("div",null,w(f.a,{label:"\u8bf7\u8f93\u5165\u90ae\u7bb1",fullWidth:!0,onChange:function(e,t){R(F(F({},X),{},t?{email:e,errPhoneText:""}:{email:""}))},notEmpty:!0,errorText:X.errPhoneText})),w("div",{className:t.pwTop},w(b.a,{start:!1,onClick:q,helpText:X.errCodeText,onChange:function(e){return R(F(F({},X),{},{code:e,errCodeText:""}))},codeStyle:(null===(e=X.email)||void 0===e?void 0:e.length)?null:t.grey})),S.length>0?w("div",{className:t.pwTop},w(y.a,{des:S,callback:function(){return I("")}})):null,w("div",{className:t.loginTop},w(h.a,{disabled:k,className:Object(m.a)(t.login),fullWidth:!0,onClick:z,color:"primary",variant:"contained"},w(j.a,{style:{position:"absolute"}},"\u786e\u8ba4"),k&&w("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",position:"absolute"}},w(g.a,{size:28}))))))},P=o.a.createElement;t.default=function(){return P(a.a,{header:!0,back:!0},P(k,null))}},"Px9/":function(e,t,n){"use strict";var r=n("wx14"),o=n("ODXe"),a=n("Ff2n"),i=n("q1tI"),c=n.n(i),l=n("2frL"),u=c.a.createElement,s=function(e,t){return t||""!==e.trim()?""===e.trim()?"\u8bf7\u8f93\u5165E-mail":t&&!/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)?"E-mail\u8f93\u5165\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165":e.length>100?"\u8f93\u5165\u7684\u4fe1\u606f\u8fc7\u957f\uff0c\u8bf7\u68c0\u67e5\u540e\u91cd\u65b0\u8f93\u5165":"":""};t.a=function(e){var t=e.notEmpty,n=void 0!==t&&t,i=e.value,d=e.disabled,p=void 0!==d&&d,f=e.onChange,b=e.onBlur,h=e.fullWidth,m=e.label,g=e.placeholder,v=e.errorText,O=void 0===v?"":v,y=e.hot,j=void 0===y||y,x=Object(a.a)(e,["notEmpty","value","disabled","onChange","onBlur","fullWidth","label","placeholder","errorText","hot"]),w=c.a.useState(""),T=Object(o.a)(w,2),F=T[0],E=T[1];c.a.useEffect((function(){E(O)}),[O]);return u(l.a,Object(r.a)({label:m,placeholder:g,fullWidth:h,value:i,disabled:p,onChange:function(e){E("");var t=e.target.value,r=s(t,n);j&&E(r),f&&f(t,0===r.length)},error:F.length>0,helperText:F,onBlur:function(e){var t=e.target.value,r=s(t,n);E(r),b&&b(e)},variant:"filled"},x))}},YTlh:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n("0NzB"),o=n("XwMy"),a=function(e){var t=e.phoneType,n=e.bind,a=e.mobileNo,i=e.email,c=e.country,l=e.setLoading,u=e.setError;return new Promise((function(e){var s={businessType:t?n?"ChangeMobileNo":"BindMobileNo":n?"UpdateEmail":"BindEmail",mfaType:t?"Sms":"Email",email:i,mobileNo:a,country:c};Object(r.postJson)({path:o.b+"/mfaSendCode",data:s}).then((function(t){l(!1),0===t.status?(e(!0),u("")):(e(!1),u(t.message))}))}))},i=function(e){var t=e.phoneType,n=e.bind,a=e.mobileNo,i=e.email,c=e.country,l=e.code,u=e.requestId,s=e.setLoading,d=e.setError;return new Promise((function(e){var p={code:l,email:i,mobileNo:a,mobilCountry:c,requestId:u};Object(r.postJson)({path:o.b+(t?n?"/changeMobileNo":"/bindMobileNo":n?"/changeEmail":"/bindEmail"),data:p}).then((function(t){s(!1),0===t.status?e(!0):(e(!1),d(t.message))}))}))}},iRFQ:function(e,t,n){"use strict";var r=n("rePB"),o=n("ODXe"),a=n("Ff2n"),i=n("q1tI"),c=n.n(i),l=n("iuhU"),u=n("R/WZ"),s=n("ZBNC"),d=n("ADg1"),p=n("+tNc"),f=n("7SZd"),b=n("Z3vd"),h=n("dl/7"),m=n("LXXt"),g=c.a.createElement;function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=Object(u.a)((function(e){return Object(s.a)({root:{width:"100%",display:"flex",flexDirection:"row"},textField:{"& .MuiOutlinedInput-adornedEnd":{paddingRight:0},"& .MuiButton-text":{padding:"15px 6px",width:"100%"},"& .MuiFilledInput-underline:before":{content:"none"},"& .MuiFilledInput-underline:after":{content:"none"},"& .MuiFilledInput-root":{backgroundColor:"#FFFFFF",border:"1px solid #E0E0E0",borderRadius:4}},adornment:{height:40,padding:"6px 9px",borderRadius:"28px",fontSize:"0.875rem",position:"relative",display:"flex",justifyContent:"center","&:hover":{backgroundColor:"#263BE0"}},err:{fontSize:"0.75rem",color:h.a[400]},btn:{borderTopLeftRadius:0,borderBottomLeftRadius:0},main:{color:"#0060FF","&:hover":{color:"#FFFFFF"},cursor:"pointer"},grey:{color:m.a[400],"&:hover":{color:m.a[400]}},adron:{"&:hover":{backgroundColor:"#FFFFFF"}}})}));t.a=function(e){var t=e.label,n=void 0===t?"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801":t,r=e.actionText,u=void 0===r?"\u83b7\u53d6\u9a8c\u8bc1\u7801":r,s=e.onClick,h=e.onChange,m=void 0===h?function(){return{}}:h,v=e.start,j=void 0!==v&&v,x=e.startFuc,w=e.helpText,T=void 0===w?"":w,F=Object(a.a)(e,["label","actionText","onClick","onChange","start","startFuc","helpText"]),E=y(),k=Object(i.useRef)(null),P=c.a.useState("60s"),N=Object(o.a)(P,2),C=N[0],S=N[1],I=c.a.useState({click:!1,next:!1,err:""}),D=Object(o.a)(I,2),B=D[0],X=D[1];c.a.useEffect((function(){j&&x&&x().then((function(e){e&&X(O(O({},B),{},{click:!0,err:""}))}))}),[j]),c.a.useEffect((function(){if(B.click){var e=60,t=setInterval((function(){e<=1?(S("1s"),clearInterval(t),X(O(O({},B),{},{click:!1,next:!0,err:""})),S("60s")):(e--,S(e+"s"))}),1e3);return k.current=t,function(){return clearInterval(k.current)}}}),[B.click]),c.a.useEffect((function(){X(O(O({},B),{},{err:T}))}),[T]);var R=function(){B.click||X(O(O({},B),{},{click:!0,err:""}))};return g(d.a,{className:E.root},g(p.a,{error:""!==B.err,label:n,fullWidth:!0,className:E.textField,InputProps:{endAdornment:g(f.a,{disableTypography:!0,position:"end",style:{width:100},className:Object(l.a)(E.adornment,B.click?E.adron:null,F.adornStyle),onClick:function(e){s&&!B.click&&s(R)}},g(b.a,{className:Object(l.a)(E.btn,E.main,B.click?E.grey:null,F.codeStyle)},B.click?C:B.next?"\u91cd\u65b0\u53d1\u9001":u))},onChange:function(e){/[\u4E00-\u9FA5\uF900-\uFA2D]/.test(e.target.value)||(X(O(O({},B),{},{err:""})),m(e.target.value))},onBlur:F.onBlur,onFocus:F.onFocus,helperText:B.err,variant:"filled"}))}},qGmz:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/m/personal/setting/email",function(){return n("4yGX")}])}},[["qGmz",0,2,1,3,4,5,6,7,15]]]);